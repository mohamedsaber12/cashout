# Instant Cashin API Endpoint


### Usage

* This endpoint is used to disburse the E-Money for an anonymous recipients through a specific issuer.


|  Environment	|  API location source |   HTTP Method	| Content Type	|
|---	        |---   	               |---	            |---	        |
|     {ENV}     |    ^disburse/        |      POST      |     JSON      |


### Headers
```
{
    "Content-Type": "application/json",
    "Authorization": "Bearer {ACCESS_TOKEN}"
}
```


### Request
1. **Request Parameters**

    | Field                 |   M/O/C  |    Type           | Notes                                       |
    |-------   |------    |---------------------------------------------|----------                                      |
    | issuer                |   M      |   String          | the channel to disburse the e-money through |
    | amount                |   M      |   Float           |                                             |
    | msisdn                |   C      |   String          | Wallets                                     |
    | bank_card_number      |   C      |   String          | bank accounts/cards only                    |
    | bank_imd_or_bin       |   C      |   String          | bank accounts/cards only                    |
    | full_name             |   C      |   String          | bank accounts/cards only                    |
    | client_reference_id   |   O      |   String of uuid4 | it's reference id generated by your side    |

    * **Usage:**
        * **{issuer}** options list: [vodafone, etisalat, orange, aman, bank_wallet, bank_card] -case insensitive-.
        * **{amount}** it's valid to use decimal point numbers up to 2 decimal points ex: 53.99
        * **{msisdn}**: the +2 added automatically, so it consists of 11 numbers, ex: 01020304050
        * **{bank_card_number}**: expected: [bank account number, IBAN, card number]
        * **{bank_imd_or_bin}**: the banks IMD/BIN list.
        * **{client_reference_id}** generated UUID by the client to be saved as reference in case of timeouts.


            |  Bank Name                                       |  Bank IMD/BIN |
            |-------	                                       |------         |
            |  Al Baraka Bank Limited                          |   639530      |
            |  Allied Bank Limited                             |   589430      |
            |  Askari Commercial Bank Limited                  |   603011      |
            |  Bank AL Habib Limited                           |   627197      |
            |  Bank Alfalah Limited                            |   627100      |
            |  Faysal Bank Limited                             |   601373      |
            |  Habib Bank Limited                              |   600648      |
            |  Meezan Bank Limited                             |   627873      |
            |  National Bank of Pakistan                       |   958600      |
            |  Soneri Bank Limited                             |   786110      |
            |  Standard Chartered Bank                         |   627271      |
            |  United Bank Limited                             |   588974      |
            |  SAMBA Bank                                      |   606101      |
            |  Dubai Islamic Bank Pakistan Limited             |   428273      |
            |  BankIslami Pakistan Limited                     |   639357      |
            |  Bank of Khyber                                  |   627618      |
            |  Bank of Punjab                                  |   623977      |
            |  Telenor Microfinance Bank                       |   639390      |
            |  JS Bank                                         |   603733      |
            |  Silk Bank                                       |   627544      |
            |  Summit Bank                                     |   604781      |
            |  Habib Metropolitan Bank Limited                 |   627408      |
            |  FINCA Microfinance Bank                         |   502841      |
            |  Sindh Bank                                      |   505439      |
            |  Citi Bank                                       |   508117      |
            |  Apna Microfinance Bank                          |   581862      |
            |  Ubank                                           |   581886      |
            |  First Women Bank Limited                        |   628138      |
            |  Mobilink Microfinance Bank Limited              |   585953      |
            |  ICBC                                            |   621464      |
            |  Advans Pakistan Microfinance Ltd.               |   505895      |
            |  NRSP Microfinance Bank Ltd.                     |   586010      |
            |  MCB Islamic Banking                             |   507642      |
            |  FirstPay/HBL MFB                                |   220557      |
            |  MCB Bank Limited                                |   589388      |
            |  SME Bank Limited                                |   604889      |
            |  Khushali Microfinance Bank                      |   220563      |
            |  Zarai Taraqiati Bank                            |   220564      |
            |  MCB ARIF HABIB                                  |   220561      |
            |  WHITE LABEL ATM                                 |   999914      |
            |  HBL ASSET MANAGEMENT                            |   220565      |
            |  NayaPay Private Limited                         |   478278      |
            |  NBP Funds                                       |   629113      |
            |  Central Directorate of National Savings (CDNS)  |   62911600    |
            |  PayMax (Zong)                                   |   999919      |
            |  SadaPay                                         |   559049      |
            |  BYKEA                                           |   999921      |
            |  SimPaisa                                        |   999922      |
            |  Abhi Finance                                    |   999926      |
            |  TAG                                             |   999925      |
            |  Barwaqt                                         |   999955      |
            |  OPay                                            |   999947      |
            |  Keenu                                           |   999906      |
            |  FINJA EMI                                       |   220591      |

### Response
1. **Response Parameters**

    |  Field                |    Type    |    Notes    |
    |---                    |---	     |---	       |
    |  disbursement_status  |   String   |             |
    |  status_description   |   String   |             |
    |  status_code          |   String   |             |
    |  transaction_id       |   String   |             |

### Samples

1. **Instant cashin request through Vodafone as an issuer**

    * > request

            {
                "amount": "90.56",
                "issuer": "vodafone",
                "msisdn": "01092737975"
            }

    * > response

            {
                "transaction_id": "92134d2b-d1a5-4dde-859c-a1175e94582c",
                "msisdn": "01092737975",
                "issuer": "vodafone",
                "amount": "90.56",
                "full_name": "",
                "disbursement_status": "success",
                "status_code": "200",
                "status_description": "تم إيداع 90.56 جنيه إلى رقم 01010101010 بنجاح",
                "aman_cashing_details": null,
                "created_at": "2020-10-12 06:54:31.849561",
                "updated_at": "2020-10-12 06:54:33.146926"
            }


2. **Instant cashin request through Etisalat as an issuer**

    * > request

            {
                "issuer": "etisalat",
                "amount": 100.0,
                "msisdn": "01112131415"
            }

    * > response

            {
                "transaction_id": "4d8d2215-6b15-4cf0-8a5a-e62e3eb5fdb3",
                "msisdn": "01112131415",
                "issuer": "etisalat",
                "amount": 100.0,
                "full_name": "",
                "disbursement_status": "failed",
                "status_code": "90040",
                "status_description": "عزيزي العميل أنت غير مشترك في خدمة اتصالات كاش، للاشتراك برجاء زيارة أقرب فرع من فروع اتصالات بالخط والرقم القومي للمزيد من المعلومات اتصل ب-778",
                "aman_cashing_details": null,
                "created_at": "2020-10-12 07:00:23.453577",
                "updated_at": "2020-10-12 07:00:24.615864"
            }


3. **Instant cashin request through Aman as an issuer**

    * > request

            {
                "issuer": "aman",
                "amount": 100.0,
                "msisdn": "01092737975",
                "first_name": "Tom",
                "last_name": "Bernardo",
                "email": "tom.bernardo@gmail.com"
            }

    * > response

            {
                "transaction_id": "df1ee23f-c146-4c99-88ef-d6355c727d4b",
                "msisdn": "01092737975",
                "issuer": "aman",
                "amount": 100.0,
                "full_name": "Tom Bernardo",
                "disbursement_status": "successful",
                "status_code": "200",
                "status_description": "“برجاء التوجه إلى فرع أمان. اسأل على خدمة مدفوعات أكسبت. اسخدم الكود الخاص 3988885. لصرف مبلغ 100.00 جنيه. شكراً لاختيارك مدفوعات أكسبت.“",
                "aman_cashing_details": {
                    "bill_reference": 3988885,
                    "is_paid": false
                },
                "created_at": "2020-10-12 07:04:05.313545",
                "updated_at": "2020-10-12 07:04:11.172575"
            }


4. **Instant cashin request through Orange as an issuer**

    * > request

            {
                "issuer": "orange",
                "amount": 100.0,
                "msisdn": "01092737975"
            }

    * > response

            {
                "transaction_id": "7ce037de-a8d8-411c-be19-65ceb4e0dbd3",
                "issuer": "orange",
                "msisdn": "01092737975",
                "amount": 100.0,
                "full_name": "",
                "disbursement_status": "success",
                "status_code": "200",
                "status_description": "amount is deposited successfully",
                "aman_cashing_details": null,
                "created_at": "2020-10-12 07:19:46.121389",
                "updated_at": "2020-10-12 07:19:47.550900"
            }


5. **Instant cashin request through Bank Wallets as an issuer**

    * > request

            {
                "issuer": "bank_wallet",
                "amount": 100.0,
                "msisdn": "01092737975"
            }

    * > response

            {
                "transaction_id": "d9707a55-16af-4d35-9c69-2bce5ecc6cfb",
                "issuer": "bank_wallet",
                "msisdn": "01092737975",
                "amount": 100.0,
                "full_name": "",
                "disbursement_status": "success",
                "status_code": "200",
                "status_description": "amount is deposited successfully",
                "aman_cashing_details": null,
                "created_at": "2020-10-12 07:23:17.540219",
                "updated_at": "2020-10-12 07:23:18.113919"
            }


6. **Instant cashin request through Bank Cards / Accounts as an issuer**

    * > request

            {
                "issuer": "bank_card",
                "amount": 100.0,
                "full_name": "Tom Bernard Ceisar",
                "bank_card_number": "1111-2222-3333-4444",
                "bank_code": "CIB",
                "bank_transaction_type": "cash_transfer"
            }

    * > response

            {
                "transaction_id": "01ea2cd1-f01f-4857-b5ae-1e6359d1c779",
                "issuer": "bank_card",
                "amount": "100.00",
                "bank_card_number": "1111 2222 3333 4444",
                "full_name": "Tom Bernard Ceisar",
                "bank_code": "MISR",
                "bank_transaction_type": "salary",
                "disbursement_status": "pending",
                "status_code": "8000",
                "status_description": "Transaction received and validated successfully. Dispatched for being processed by the bank",
                "created_at": "2020-10-12 07:25:51.631701",
                "updated_at": "2020-10-12 07:25:52.263173"
            }


7. **Examples of failure cases**

    7.1 Parameters didn't pass validations

                {
                    "disbursement_status": "failed",
                    "status_description": {
                        "amount": [
                            "This field is required."
                        ],
                        "issuer": [
                            "This field is required."
                        ]
                    },
                    "status_code": "400"
                }

    7.2 Token used is expired

            {
                "disbursement_status": "failed",
                "status_description": "Authentication credentials were not provided.",
                "status_code": "401"
            }

    7.2 The amount to be disbursed exceeds the current balance of the entity

            {
                "disbursement_status": "failed",
                "status_description": "Sorry, the amount to be disbursed exceeds you budget limit, please contact your support team",
                "status_code": "400"
            }


8. **Test e-wallet numbers**

    **IMPORTANT Note**:

        these numbers will get success response on staging environment only

    1. Test number for vodafone issuer

             01023456789

    2. Test number for etisalat issuer

            01123456789

    3. Test number for orange issuer

             01223456789

    4. Test number for bank_wallet issuer

            01123416789

    5. Test number for bank_card issuer

            1111222233334444

    6. Test IBAN number for bank_card issuer

            EG829299835722904511873050307


---

> **_NOTE:_** Transactions on wallet take notime to get final status (on the spot)

> **_NOTE:_** Transactions on bank take 2 Working Days to get final status

---
