{% extends 'new_base.html' %}
{% load i18n %}
{% load static %}
{% block title %} Levels {% endblock %}

{% block body %}

    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-body">
                    <form action="." method="post" id="step_1_form" >

                          {% csrf_token %}

                        <table class="table" id="levelform">
                            {{ levelform.management_form }}
                            {% for form in levelform.forms %}
                                {% if forloop.first %}
                                <thead>
                                    <tr>
                                        {% for field in form.visible_fields %}
                                            <th>{{ field.label|capfirst }}</th>
                                        {% endfor %}
                                    </tr>
                                </thead>

                                {% endif %}
                            {% endfor %}
                            <tbody>

                            {% for form in levelform.forms %}

                                <tr class="level_formset_row">
                                    {% for field in form.visible_fields %}
                                        <td>
                                            {# Include the hidden fields in the form #}
                                            {% if forloop.first %}
                                                {% for hidden in form.hidden_fields %}
                                                    {{ hidden }}
                                                {% endfor %}
                                            {% endif %}
                                            {{ field.errors.as_ul }}
                                            {{ field }}
                                        </td>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                        <input type="submit" value="submit" class="btn btn-upload btn-success pull-right">
                    </form>


                    <!-- /.table-responsive -->
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
    </div>
    <!-- /#page-wrapper -->

    </div>
{% endblock %}
{% block script %}
    <script src="{% static 'js/jquery.formset.min.js' %}"></script>
<script src="{% static 'gentella/jquery.smartWizard.js' %}"></script>
<script src="{% static 'gentella/switchery.min.js' %}"></script>
    <!-- Custom Theme Scripts -->
<script src="{% static 'gentella/custom.min.js' %}"></script>

<script type="text/javascript">
        var levelform = $('#levelform tbody tr');
        levelform.formset({
            addText: 'add another level',
            deleteText: '&nbsp; <i class="fa fa-times-circle-o" aria-hidden="true"></i>',
            prefix: '{{ levelform.prefix }}',
            addCssClass: 'add_level',
            added: function (row) {
                var oldheight = $('.stepContainer').css('height');
                oldheight = parseInt(oldheight.replace("px", ""));
                var newheight = oldheight+60;
                $('.stepContainer').height(newheight+"px");
            },
            formCssClass: 'level'
        });
</script>
{% endblock %}
